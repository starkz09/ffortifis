(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"0HCW":function(e,t,n){"use strict";n.d(t,"g",function(){return l}),n.d(t,"i",function(){return b}),n.d(t,"f",function(){return f}),n.d(t,"h",function(){return v}),n.d(t,"b",function(){return p}),n.d(t,"a",function(){return g}),n.d(t,"d",function(){return O}),n.d(t,"e",function(){return m}),n.d(t,"c",function(){return E});var a=n("QtlZ"),r=n("Hvhg"),i=n("SFoa"),c=n("+f1A"),o=n("LVcX"),u=n("NFvl"),s=n("MFhO"),d=n("PjZB"),l=function getUnreadCampaignsById(){var e=a.a.getState().campaigns.unreadCampaigns,t={},n=!0,r=!1,i=void 0;try{for(var c,u=e[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var s=c.value,d=Object(o.a)(null,["conversation","campaignId"],s);if(!d)return null;t[d]=s}}catch(l){r=!0,i=l}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}return t},b=function isActiveWelcomeMessageCampaign(e){return Object(u.a)(["campaigns","activeCampaign","attributes","campaignDisplayType"],e)===s.a.WELCOME_MESSAGE},f=function getHasChatCtaForActiveCampaign(e){return Object(u.a)(["campaigns","activeCampaign","attributes","cta","CtaType"],e)===d.a.CHAT_RESPONSE},v=function hasActiveCampaign(e){return!!Object(u.a)(["campaigns","activeCampaign","id"],e)},p=function getActiveCampaignPlaybookId(e){return Object(o.a)(null,["campaigns","activeCampaign","attributes","playbookId"],e)},g=function getActiveCampaignId(e){return Object(o.a)(null,["campaigns","activeCampaign","id"],e)},O=function getEnrolledCampaignIds(e){return Object(u.a)(["campaigns","enrolledCampaignIds"],e)},m=function getEnrolledInteractionIds(e){return Object(u.a)(["campaigns","enrolledInteractionIds"],e)},E=function getContextForPreRenderedCampaigns(e){return{embedId:Object(r.d)(e),geoLocation:Object(c.k)(e),locale:Object(i.e)(),pageUrl:Object(c.h)(e),sessionId:Object(c.l)(e),siteVisits:Object(c.m)(e)}}},"6iwg":function(e,t,n){"use strict";var a=n("nfbA"),r=n("FgEv"),i=n("Cpup"),c={configuration:{gates:[],dataProtection:{},showBranding:!1,theme:{awayMessage:null,welcomeMessage:null,team:[],userList:[],userListMode:void 0}},overrides:{}},o={RECEIVE_EMBED_CONFIGURATION:function receiveEmbedConfigurationHandler(e){var t=e.action,n=e.draft,i=Object(a.a)(Object(a.a)({},n.configuration),t.payload.configuration);return Object(a.a)(Object(a.a)({},t.payload),{},{configuration:Object(r.a)(i,n.overrides),overrides:n.overrides})},RECIEVE_EMBED_AWAY_MESSAGE:function receiveEmbedAwayMessageHandler(e){var t=e.action,n=e.draft,a=t.payload.message;void 0!==a&&a&&(n.configuration.theme.awayMessage=t.payload.message)},RECEIVE_EMBED_WELCOME_MESSAGE:function receiveEmbedWelcomeMessageHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.message,i=a.authorId;n.configuration.theme.welcomeMessage=r,i&&(n.configuration.autoAssigneeId=i)},RECEIVE_EMBED_CONFIGURATION_OVERRIDE:function receiveEmbedConfigurationOverrideHandler(e){var t=e.action,n=e.draft;n.overrides=t.payload,n.configuration=Object(r.a)(n.configuration,t.payload)}},u=Object(i.b)(c,o);t.a=u},"7Dgk":function(e,t,n){"use strict";var a=n("Cpup"),r={RECEIVE_IDENTITY_MAP:function receiveIdentityMapHandler(e){var t=e.action;e.draft;return t.payload}},i=Object(a.b)({},r);t.a=i},"9ttK":function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return o});var a=n("WwEg"),r=n("QtlZ"),i=(n("SFoa"),n("da4L"),n("LVcX")),c=function getAttributeFromCampaignOrDefault(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(i.a)(n,["attributes"].concat(Object(a.a)(t)),e)},o=function getCampaignFromEmbedById(e){return Object(i.a)([],["embed","configuration","campaigns"],r.a.getState()).filter(function(t){return t.id===e})[0]}},"9udt":function(e,t,n){"use strict";var a=n("QtlZ"),r=n("z5yO"),i=n("U3QC"),c=n("icD7"),o=n("Cpup"),u=n("qwiD"),s=n("OA1u"),d=n("LVcX"),l=n("i9gz"),b=n("Jstd"),f=n("hm8b"),v=n("vTYT"),p=n("8saY"),g=n("0lfv"),O=n("Nlet"),m=n("VYE+"),E=n("7oto"),I=n("EQxi"),j=n("SFoa"),C=["drift.click","drift.me","drift.com","driftqa.com","driftqa.me","driftqa.click"];var A=function handleWhitelistedUrls(){(function isWhitelistedUrl(){var e=Object(O.b)().url,t=Object(d.a)([],["embed","configuration","theme","urlWhitelist"],a.a.getState());if(Object(l.a)(t)||!e)return!0;if(Object(b.a)(function(t){return e.includes(t)})(C))return!0;var n=t.map(function(e){return Object(I.c)(e)});return!!Object(b.a)(function(t){return e.includes(t)})(n)||(console.warn("The Drift widget is not allowed to load on this domain: ".concat(e,".  Learn more: https://gethelp.drift.com/hc/en-us/articles/360019516853-Troubleshooting-Why-Can-t-I-See-My-Widget-")),!1)})()||Object(E.a)({topic:"destroy-drift"})},h=function handleFrameAlignment(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0)||Object(j.i)();e===v.a.LEFT&&Object(E.a)({topic:"align-frames",message:{alignment:e}})},S=function processCustomIconPlacement(e){var t=Object(g.l)(navigator.userAgent)?"mobile":"desktop";if(Object(d.a)(p.d.DEFAULT,["configuration","theme","widgetIconPosition",t,"type"],e)!==p.d.DEFAULT){var n=e.configuration.theme.widgetIconPosition[t].spacing.bottom;Object(E.a)({topic:"update-frame-vertical-offset",message:{offset:n}})}},_=function overrideVerticalOffset(e){Object(f.a)(e)||Object(E.a)({topic:"update-frame-vertical-offset",message:{offset:e}})},y=function overrideCookieDomain(e){if(e){var t=Object(m.f)([e]);t&&a.a.dispatch(Object(u.j)({cookieDomain:t}))}};n.d(t,"a",function(){return T}),n.d(t,"b",function(){return k});var T=function onReceiveEmbedEpic(e){return e.pipe(Object(o.c)("RECEIVE_EMBED_CONFIGURATION"),Object(r.a)(function(){return"controller"===a.a.name}),Object(i.a)(function(e){return function processPayload(e){h(),A(),S(e)}(e.payload)}),Object(c.a)())},k=function onReceiveEmbedOverrideEpic(e){return e.pipe(Object(o.c)("RECEIVE_EMBED_CONFIGURATION_OVERRIDE"),Object(r.a)(function(){return"controller"===a.a.name}),Object(i.a)(function(e){return function processOverridePayload(e){e&&Object.keys(e).forEach(function(t){var n=e[t];switch(t){case"verticalOffset":_(n);break;case"cookieDomain":y(n);break;case"campaignsEnabled":a.a.dispatch(Object(s.c)(!n))}})}(e.payload)}),Object(c.a)())}},BHzW:function(e,t,n){"use strict";var a=n("jm9a"),r=n("nfbA"),i=n("+/Je"),c=n("da4L"),o=n("hm8b"),u=n("i9gz"),s=n("TbSn"),d=n("O0zU"),l=n("weY7"),b=n("NFvl"),f=n("PjZB"),v=n("0lfv"),p=n("9xv8"),g=n("Cpup"),O=function mergeConversationStatus(e,t,n){e.conversationStatus[t]=Object(r.a)(Object(r.a)({},e.conversationStatus[t]),n)},m=function updateLastMessage(e,t){if(e.conversations[t.conversationId]){var n=e.conversations[t.conversationId].lastMessage;if(n&&Object(c.b)(t)<=Object(c.b)(n))return;e.conversations[t.conversationId].lastMessage=t}},E={SEND_MESSAGE:function sendMessageHandler(e){var t=e.action,n=e.draft,c=t.payload.message.conversationId;0===c&&(c=i.b),Object(o.a)(c)&&(c=i.a),n.activeConversation=c,n.chatOpen=!0,n.messages[c]=Object(r.a)(Object(r.a)({},n.messages[c]||{}),{},Object(a.a)({},t.payload.message.attributes.widgetGuid,t.payload.message)),n.conversations[c]||(n.conversations[c]={conversation:{id:c}}),m(n,t.payload.message)},RECEIVE_MESSAGE_SENT:function receiveMessageSentHandler(e){var t=e.action,n=e.draft,c=t.payload,o=c.message,s=c.isNew,d=void 0!==s&&s,l=c.isPreRendered,b=void 0!==l&&l;if(d){var f=b?i.b:i.a;n.messages[o.conversationId]=Object(r.a)(Object(r.a)({},n.messages[f]),{},Object(a.a)({},o.attributes.widgetGuid,o)),n.conversations[o.conversationId]=Object(r.a)(Object(r.a)({},n.conversations[f]),{},{conversation:Object(r.a)(Object(r.a)({},n.conversations[f].conversation),{},{id:o.conversationId,createdAt:o.createdAt,updatedAt:o.createdAt})}),delete n.conversations[f],delete n.messages[f]}n.endUserEngaged=!0,d&&!b||Object(u.a)(o.body)||O(n,o.conversationId,{endUserResponded:!0}),n.messages[o.conversationId]=Object(r.a)(Object(r.a)({},n.messages[o.conversationId]),{},Object(a.a)({},o.attributes.widgetGuid,o)),n.activeConversation=o.conversationId,n.conversations[o.conversationId]||(n.conversations[o.conversationId]={conversation:{id:o.conversationId}}),m(n,o)},RECEIVE_PRE_RENDERED_MESSAGES:function receivePreRenderedMessagesHandler(e){var t=e.action,n=e.draft,a=t.payload,c=a.messages,o=a.resumeFlowContext;if(c&&c.length){var u=c.map(function(e,t){return Object(r.a)(Object(r.a)({},e),{},{id:t})});n.messages[i.b]=u,n.unreadAgentMessages[i.b]=u.map(function(e){return e.id}),n.conversations[i.b]={conversation:{id:i.b,updatedAt:Date.now()},lastMessage:Object(s.a)(u),lastAgentMessage:Object(s.a)(u),unreadMessages:u.length},n.resumeFlowContext=o,n.activeConversation=i.b}},RECEIVE_AGENT_MESSAGE:function receiveAgentMessageHandler(e){var t=e.action,n=e.draft,i=t.payload,c=(void 0===i?{}:i).message;c&&c.conversationId&&(n.messages[c.conversationId]=Object(r.a)(Object(r.a)({},n.messages[c.conversationId]),{},Object(a.a)({},c.id,c)),m(n,c))},RECEIVE_CONVERSATION:function receiveConversationHandler(e){var t=e.action,n=e.draft,a=t.payload.conversation;n.conversations[a.conversation.id]=a},RECEIVE_INITIAL_ACTIVE_CONVERSATION:function receiveInitialActiveConversationHandler(e){var t=e.action,n=e.draft;n.activeConversation=t.payload.conversation.conversation.id,n.conversations[t.payload.conversation.conversation.id]=t.payload.conversation},RECEIVE_MESSAGES_FOR_CONVERSATION:function receiveMessagesForConversationHandler(e){var t=e.action,n=e.draft,a=t.payload,i=a.messages,c=a.conversationId,o=a.hasMoreMessages,s=void 0!==o&&o,d=a.nextPageMessageId,l=void 0===d?null:d;n.messages[c]=Object(r.a)(Object(r.a)({},n.messages[c]),Object(p.a)(i)),n.conversations[c]=Object(r.a)(Object(r.a)({},n.conversations[c]),{},{hasMoreMessages:s,nextPageMessageId:l});var b=i.filter(function unreadAgentMessages(e){return e.viewerRecipientStatus!==f.f.READ&&e.authorType===f.b.USER&&!!e.body&&!!e.body.length}).map(function(e){return e.id});n.unreadAgentMessages[c]=b;i.filter(function hasNonEmptyEndUserMessages(e){return(e.authorType===f.b.END_USER||e.authorType===f.b.LEAD)&&!!e.body&&!Object(u.a)(e.body)}).length>0&&O(n,c,{endUserResponded:!0})},RECEIVE_BULK_CONVERSATIONS:function receiveBulkConversationsHandler(e){var t=e.action,n=e.draft,a=t.payload.conversations.reduce(function(e,t){return e[t.conversation.id]=t,e},{});n.conversations=Object(d.a)(n.conversations,a)},SET_ACTIVE_CONVERSATION:function setActiveConversationHandler(e){var t=e.action;e.draft.activeConversation=t.payload.conversationId},CLEAR_ACTIVE_CONVERSATION:function clearActiveConversationHandler(e){e.draft.activeConversation=null},RECEIVE_READ_MESSAGES:function sendReadReceiptHandler(e){var t=e.action,n=e.draft,a=t.payload.conversationId;n.unreadAgentMessages[a]=[]},SET_UNREAD_MESSAGE:function setUnreadMessageHandler(e){var t=e.action,n=e.draft,a=t.payload.message;n.unreadAgentMessages[a.conversationId]?n.unreadAgentMessages[a.conversationId].push(a.id):n.unreadAgentMessages[a.conversationId]=[a.id]},RECEIVE_ATTACHMENTS:function receiveAttachments(e){var t=e.action,n=e.draft;n.attachments=Object(r.a)(Object(r.a)({},n.attachments),Object(v.b)(t.payload.attachments))},RECEIVE_IS_TYPING:function setIsTypingHandler(e){var t=e.action;e.draft.typingIndicators[t.payload.conversationId]=t.payload},SET_ACTIVE_DRIFTLINK:function setActiveDriftlinkHandler(e){var t=e.action;e.draft.activeDriftlink=t.payload},RECEIVE_AGENT_STATUS:function receiveAgentStatusHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.agentId,i=a.availability,c=a.lastActivity;n.agentPresence[r]={status:i,lastActivity:c}},PERMACLOSE_CONVERSATION:function permacloseConversation(e){var t=e.action,n=e.draft,a=t.payload.conversationId;O(n,a,{permaclosed:!0})},SET_HAS_FORCED_CONVERSATION:function setHasForcedConversationHandler(e){e.draft.hasForcedConversation=!0},RECEIVE_CAMPAIGN_CONVERSATIONS:function receiveCampaignConversationsHandler(e){var t=e.action,n=e.draft,a=t.payload;if(!Object(v.m)(a)){var r=Object(v.a)(Object(l.a)(Object(b.a)(["conversation"]),t.payload));n.campaignConversations=r}}},I=Object(g.b)({endUserEngaged:!1,activeConversation:null,activeDriftlink:null,attachments:{},conversations:{},conversationStatus:{},typingIndicators:{},agentMessagesFromCurrentSession:{},messages:{},unreadAgentMessages:{},agentPresence:{},resumeFlowContext:{},hasForcedConversation:!1,campaignConversations:{}},E);t.a=I},Hvhg:function(e,t,n){"use strict";n.d(t,"d",function(){return d}),n.d(t,"e",function(){return l}),n.d(t,"b",function(){return b}),n.d(t,"a",function(){return f}),n.d(t,"j",function(){return v}),n.d(t,"i",function(){return p}),n.d(t,"f",function(){return g}),n.d(t,"c",function(){return O}),n.d(t,"h",function(){return E}),n.d(t,"k",function(){return I}),n.d(t,"m",function(){return j}),n.d(t,"g",function(){return C}),n.d(t,"l",function(){return A});var a=n("QtlZ"),r=n("SFoa"),i=n("NFvl"),c=n("LVcX"),o=(n("i9gz"),n("8saY")),u=n("hscJ"),s=n("0lfv"),d=function getEmbedId(e){return Object(i.a)(["embed","id"],e)},l=function getEmbedPathOr(e,t){var n=a.a.getState().embed,r=void 0===n?{}:n;return Object(c.a)(e,t,r)},b=function getEmbedConfiguration(e){return Object(i.a)(["embed","configuration"],e)},f=function getCampaignAttributeById(e,t,n){var a=Object(r.b)(e);return a?Object(c.a)(n,["attributes",t],a):n},v=function getPardotVisitorId(e){return Object(i.a)(["embed","configuration","integrations","pardotId"],e)},p=function getInboxIdOverride(e){return Object(i.a)(["embed","overrides","inboxId"],e)},g=function getEmbedThemeValueOrDefault(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Object(c.a)(n,["embed","configuration","theme",t],e)},O=function getEmbedConfigurationValueOrDefault(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Object(c.a)(n,["embed","configuration",t],e)},m=function getLandingPageConfigurationValueOrDefault(e,t,n){return Object(c.a)(n,["embed","configuration","landingPageConfig",t],e)},E=function getFirstGradientLandingPageColor(e){return m(e,"firstGradientColor","F55C5C")},I=function getSecondGradientLandingPageColor(e){return m(e,"secondGradientColor","C755D5")},j=function getWidgetColorMode(e){return m(e,"colorMode",u.a.DEFAULT)},C=function getEndUserAllowedToSendGif(e){return Object(c.a)(!0,["embed","configuration","theme","allowEndUserToSendGif"],e)},A=function getVerticalOffset(e){var t=Object(c.a)("",["session","context","userAgent"],e),n=Object(s.l)(t)?"mobile":"desktop";if(Object(c.a)(o.d.DEFAULT,["embed","configuration","theme","widgetIconPosition",n,"type"],e)!==o.d.DEFAULT){var a=e.embed.configuration.theme.widgetIconPosition[n].spacing;return Object(s.m)(a.bottom)?void 0:parseFloat(a.bottom)}}},K7i0:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"n",function(){return i}),n.d(t,"m",function(){return c}),n.d(t,"p",function(){return o}),n.d(t,"i",function(){return u}),n.d(t,"k",function(){return s}),n.d(t,"c",function(){return d}),n.d(t,"e",function(){return l}),n.d(t,"q",function(){return b}),n.d(t,"h",function(){return f}),n.d(t,"j",function(){return v}),n.d(t,"f",function(){return p}),n.d(t,"l",function(){return g}),n.d(t,"o",function(){return O}),n.d(t,"d",function(){return m}),n.d(t,"r",function(){return E}),n.d(t,"b",function(){return I}),n.d(t,"g",function(){return j});var a=n("Cpup"),r=function clearActiveConversation(){return Object(a.a)({type:"CLEAR_ACTIVE_CONVERSATION"})},i=function setActiveConversation(e){return Object(a.a)({type:"SET_ACTIVE_CONVERSATION",payload:e})},c=function sendMessage(e){return Object(a.a)({type:"SEND_MESSAGE",payload:e})},o=function setHasForcedConversation(){return Object(a.a)({type:"SET_HAS_FORCED_CONVERSATION"})},u=function receiveMessageSent(e){return Object(a.a)({type:"RECEIVE_MESSAGE_SENT",payload:e})},s=function receivePreRenderedMessages(e){return Object(a.a)({type:"RECEIVE_PRE_RENDERED_MESSAGES",payload:e})},d=function receiveAgentMessage(e){return Object(a.a)({type:"RECEIVE_AGENT_MESSAGE",payload:e})},l=function receiveAttachments(e){return Object(a.a)({type:"RECEIVE_ATTACHMENTS",payload:e})},b=function setIsTyping(e){return Object(a.a)({type:"RECEIVE_IS_TYPING",payload:e})},f=function receiveConversation(e){return Object(a.a)({type:"RECEIVE_CONVERSATION",payload:e})},v=function receiveMessagesForConversation(e){return Object(a.a)({type:"RECEIVE_MESSAGES_FOR_CONVERSATION",payload:e})},p=function receiveBulkConversations(e){return Object(a.a)({type:"RECEIVE_BULK_CONVERSATIONS",payload:e})},g=function receiveReadMessages(e){return Object(a.a)({type:"RECEIVE_READ_MESSAGES",payload:e})},O=function setActiveDriftlink(e){return Object(a.a)({type:"SET_ACTIVE_DRIFTLINK",payload:e})},m=function receiveAgentStatus(e){return Object(a.a)({type:"RECEIVE_AGENT_STATUS",payload:e})},E=function setUnreadMessage(e){return Object(a.a)({type:"SET_UNREAD_MESSAGE",payload:e})},I=function permacloseConversation(e){return Object(a.a)({type:"PERMACLOSE_CONVERSATION",payload:e})},j=function receiveCampaignConversations(e){return Object(a.a)({type:"RECEIVE_CAMPAIGN_CONVERSATIONS",payload:e})}},"La++":function(e,t,n){"use strict";var a,r=n("hX/4"),i=n("nfbA"),c=n("jm9a"),o=n("mj2O"),u=n.n(o),s=n("7SM1"),d=n("xXFf"),l=n("QtlZ"),b=n("SsZN"),f=n("K7i0"),v=n("Hvhg"),p=n("SFoa"),g=n("y0Ar"),O=n("+f1A"),m=n("g6eD"),E=n("2XY6"),I=n("NFvl"),j=n("vYqp"),C=n("hm8b"),A=n("vTYT"),h=n("YvIt"),S=n("MFhO"),_=n("PjZB"),y=n("0lfv"),T=n("7oto"),k=n("t8ds"),x=n("EQxi"),N=n("Wjfv"),R=n("Ldxc"),M=n("vjCh"),w=n("0HCW");!function(e){e[e.RENDERED=0]="RENDERED",e[e.ENROLLED=1]="ENROLLED"}(a||(a={}));var D=n("9ttK");n.d(t,"b",function(){return W}),n.d(t,"c",function(){return Y}),n.d(t,"a",function(){return $});var V=["EMAIL_CAPTURE","ANNOUNCEMENT_ONE_TIME"],P=/\{\{[\s\w.'"\\|()]+\}\}/g,L=function generateCampaignFrame(e,t,n,a,r){return Object(T.a)({topic:"generate-new-frame",message:{name:e,height:t,width:n,path:"core/".concat(e),alignment:Object(p.i)(),insertBefore:a,verticalOffset:r}})},F={SLIDER:function SLIDER(e){L(A.c.SLIDER,"100%","400px",A.c.CONTROLLER,e),l.a.dispatch(Object(m.i)({controllerOpen:!0}))},TAKEOVER:function(){var e=Object(s.a)(u.a.mark(function _callee(){return u.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return L(A.c.TAKEOVER,"100%","100%"),e.next=3,Object(R.d)();case 3:case"end":return e.stop()}},_callee)}));return function TAKEOVER(){return e.apply(this,arguments)}}(),WELCOME_MESSAGE:function WELCOME_MESSAGE(){return l.a.dispatch(Object(m.e)({chatOpen:!0}))}},U=function dispatchRenderForEmailCaptureCampaign(){return L(A.c.EMAIL_CAPTURE,"0px","416px")},G=function dispatchRenderForAnnouncementCampaign(e,t){var n=F[e];n&&n(t)},H=function markEnrolledCampaign(e){l.a.dispatch(Object(N.d)(e)),function saveSessionCampaignViewToStorage(e){var t=Object(v.d)(l.a.getState());k.a.merge(h.a,Object(c.a)({},t,[e]))}(e)},B=function(){var e=Object(s.a)(u.a.mark(function _callee2(e){var t,n,a,r,i,c,o,s,b,f,v,p;return u.a.wrap(function _callee2$(u){for(;;)switch(u.prev=u.next){case 0:if(t=Object(D.a)(e,["message"],""),n=Object(D.a)(e,["automaticSender"],!1),a=Object(D.a)(e,["senderId"],null),r=Object(D.a)(e,["cta","CtaType"],null),i=!!r&&r===_.a.SCHEDULE_MEETING&&!a,c=null!==t.match(P),!(c||n||i)){u.next=16;break}return o=l.a.getState(),s=o.session,b=Object(I.a)(["endUser","id"],s),u.next=12,Object(d.c)({campaignId:e.id,senderId:a,endUserId:b});case 12:f=u.sent,v=f.data,t=v.message,a=v.senderId;case 16:return p=Object(x.b)(t),u.abrupt("return",{message:p,senderId:a});case 18:case"end":return u.stop()}},_callee2)}));return function resolveAnnouncementMessage(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(s.a)(u.a.mark(function _callee3(e,t){var n,a,r,c,o,s,d,f,p;return u.a.wrap(function _callee3$(u){for(;;)switch(u.prev=u.next){case 0:if(n=l.a.getState(),a=Object(D.b)(e),!Object(E.c)(n)&&a&&V.includes(a.type)){u.next=5;break}return u.abrupt("return");case 5:return l.a.dispatch(Object(N.d)(e)),r=Object(D.a)(a,["displayType"]),c=Object(D.a)(a,["playbookId"]),u.next=10,B(a);case 10:o=u.sent,s=o.message,d=o.senderId,f=Object.assign({},Object(i.a)(Object(i.a)({},a),{},{attributes:Object(i.a)(Object(i.a)({},a.attributes),{},{senderId:d})})),Object(b.p)({id:null,authorId:d,attributes:{playbookId:c,campaignId:e},conversationId:null}),Object(M.a)(f,s),Object(g.a)({playbookId:c,isVirtual:!0,isDelayed:t}),p=Object(v.l)(n),a.type===S.a.EMAIL_CAPTURE?U():G(r,p);case 19:case"end":return u.stop()}},_callee3)}));return function renderAnnouncementCampaign(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(s.a)(u.a.mark(function _callee4(e){var t,n,r,c,o,s,v,m,E,A,h,S,_,y;return u.a.wrap(function _callee4$(u){for(;;)switch(u.prev=u.next){case 0:return t=e.campaignId,n=e.isDelayed,r=void 0!==n&&n,c=e.playbookId,H(t),o=Object(O.b)(l.a.getState()),s=Object(p.e)(),v=Object(p.a)(),u.prev=5,A=Object(D.b)(t),h=Object(I.a)(["attributes","interactionId"],A),S=Object(I.a)(["inboxId"],A),u.next=11,$({playbookId:c,campaignId:t,interactionId:h,inboxId:S});case 11:if(_=u.sent,y=null!==(m=null===_||void 0===_?void 0:_.messages)&&void 0!==m?m:[],_&&y.length){u.next=16;break}return Object(d.a)(t,v,o,s),u.abrupt("return",a.ENROLLED);case 16:return Object(M.a)(A),Object(g.a)({isDelayed:r,isExperiment:_.isExperiment,isVirtual:!0,playbookId:c,playbookVersion:_.playbookVersion}),Object(b.p)(Object(i.a)(Object(i.a)({},null!==(E=null===y||void 0===y?void 0:y[0])&&void 0!==E?E:{}),{},{id:null,conversationId:null})),l.a.dispatch(Object(f.k)({campaignId:t,messages:y,resumeFlowContext:Object(j.a)(C.a,_.resumeFlowContext)})),u.abrupt("return",a.RENDERED);case 23:return u.prev=23,u.t0=u.catch(5),Object(d.a)(t,v,o,s),u.abrupt("return",a.ENROLLED);case 27:case"end":return u.stop()}},_callee4,null,[[5,23]])}));return function renderBotCampaign(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(s.a)(u.a.mark(function _callee5(e){var t,n,a,i,c,o,s,b;return u.a.wrap(function _callee5$(u){for(;;)switch(u.prev=u.next){case 0:return t=e.playbookId,n=e.campaignId,a=e.interactionId,i=e.inboxId,u.prev=1,c=Object(w.c)(l.a.getState()),o=c.locale,s=Object(r.a)(c,["locale"]),u.next=5,Object(d.b)({playbookId:t,campaignId:n,interactionId:a,inboxId:i,locale:o,clientSideContext:s});case 5:if(200===(b=u.sent).status){u.next=8;break}return u.abrupt("return",null);case 8:return u.abrupt("return",b.data);case 11:return u.prev=11,u.t0=u.catch(1),Object(y.w)(["Failed to fetch pre-rendered playbook data for ".concat(t)]),u.abrupt("return",null);case 15:case"end":return u.stop()}},_callee5,null,[[1,11]])}));return function fetchPreRenderedPlaybookMessages(t){return e.apply(this,arguments)}}()},Ldxc:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"c",function(){return l}),n.d(t,"d",function(){return b}),n.d(t,"b",function(){return f});var a=n("mj2O"),r=n.n(a),i=n("7SM1"),c=n("vjCh"),o=n("qixE"),u=n("6lNa"),s=n("0lfv"),d=function(){var e=Object(i.a)(r.a.mark(function _callee(e,t){return r.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:try{Object(c.l)(t.id,t.playbookId),Object(o.a)(u.b.SUBMITTED),Object(o.a)(u.b.LEAD_CAPTURED,{email:e})}catch(a){Object(s.w)(["Failed to capture lead for email announcement playbook",a])}case 1:case"end":return n.stop()}},_callee)}));return function captureLeadForEmailAnnouncementPlaybook(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(i.a)(r.a.mark(function _callee2(){return r.a.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.a)(u.b.DISMISSED);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(s.w)(["Failed to capture dismissal event for announcement playbook",e.t0]);case 8:case"end":return e.stop()}},_callee2,null,[[0,5]])}));return function markAnnouncementPlaybookDismissed(){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(r.a.mark(function _callee3(){return r.a.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.a)(u.b.OPENED);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(s.w)(["Failed to capture opened event for announcement playbook",e.t0]);case 8:case"end":return e.stop()}},_callee3,null,[[0,5]])}));return function markAnnouncementPlaybookOpened(){return e.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(r.a.mark(function _callee4(){return r.a.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.a)(u.b.CLICKED);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(s.w)(["Failed to capture click event for announcement playbook",e.t0]);case 8:case"end":return e.stop()}},_callee4,null,[[0,5]])}));return function markAnnouncementPlaybookClicked(){return e.apply(this,arguments)}}()},PCkZ:function(e,t,n){"use strict";var a=n("mj2O"),r=n.n(a),i=n("7SM1"),c=n("nfbA"),o=n("LqZ+"),u=n("QtlZ"),s=n("qwiD"),d=n("+f1A"),l=n("z8Kx"),b=n("vYqp"),f=n("hm8b"),v=n("LelF"),p=n("0lfv"),g=n("VYE+"),O=n("F8vJ"),m=n("Cpup"),E=function receiveIdentityMap(e){return Object(m.a)({type:"RECEIVE_IDENTITY_MAP",payload:e})},I={identify:function identify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).eloqua_cookie_id_enabled?e[v.g]:null},getIntegrationContext:function getIntegrationContext(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e[v.g]?{eloqua:{cookie:e[v.g]}}:{}}},j=n("qSAj"),C=n("7oto"),A=function(){var e=Object(i.a)(r.a.mark(function _callee(e,t,n){var a,i,c;return r.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(j.a)({utk:e,orgId:t,anonId:n});case 3:if(a=r.sent,i=a.data,(c=void 0===i?{}:i).email){r.next=8;break}return r.abrupt("return",null);case 8:return r.abrupt("return",{email:c.email});case 11:r.prev=11,r.t0=r.catch(0),Object(p.w)(["Failed to identify hubspot user",r.t0]);case 14:case"end":return r.stop()}},_callee,null,[[0,11]])}));return function identifyHubspotUser(t,n,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(r.a.mark(function _callee2(e,t){var n;return r.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(C.a)({topic:"hubspot-hsq-identity",message:{orgId:e,anonymousId:t}});case 2:if((n=a.sent)&&n.data){a.next=5;break}return a.abrupt("return");case 5:return a.abrupt("return",n.data);case 6:case"end":return a.stop()}},_callee2)}));return function identifyByHubspotAPI(t,n){return e.apply(this,arguments)}}(),S={isEnabled:function isEnabled(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).hubspot_js},identify:function(){var e=Object(i.a)(r.a.mark(function _callee3(e){var t,n,a,i;return r.a.wrap(function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return"hubspotutk",t=u.a.getState().embed.orgId,r.prev=2,r.next=5,Object(g.d)("hubspotutk");case 5:if(r.t0=r.sent,r.t0){r.next=10;break}return r.next=9,h(t,e);case 9:r.t0=r.sent;case 10:if(n=r.t0){r.next=13;break}return r.abrupt("return");case 13:return a={utk:n},r.next=16,A(n,t,e);case 16:return i=r.sent,a.isNewUtk=Object(p.m)(i),(null===i||void 0===i?void 0:i.email)&&(a.email=i.email),r.abrupt("return",a);case 22:r.prev=22,r.t1=r.catch(2),Object(p.w)(["Error attempting to identify hubspot user: ",r.t1]);case 25:case"end":return r.stop()}},_callee3,null,[[2,22]])}));return function identify(t){return e.apply(this,arguments)}}()},_=n("LVcX"),y={identify:function identify(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})[v.h]},getIdentityEnabled:function getIdentityEnabled(){return function isIntegrationIdentityEnabled(e,t){return Object(_.a)(!1,["embed","configuration","integrations","integrationLookUp",t],e)}(u.a.getState(),"marketo")},getIntegrationContext:function getIntegrationContext(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e[v.h]?{marketo:{munchkinValue:e[v.h]}}:{}}},T=n("acD3"),k=n("JBtm"),x=n.n(k),N={identify:function identify(){var e=Object(_.a)(null,["session","context","page","search"],u.a.getState());if(!e)return null;var t=x.a.parse(e);return t[T.a.ONESHOT_TOKEN]?t[T.a.ONESHOT_TOKEN]:null}},R={identify:function identify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).pardot_cookie_id_enabled?e[v.i]:null},getIntegrationContext:function getIntegrationContext(){return{visitor_id:{cookie:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})[v.i]}}}};n.d(t,"b",function(){return M}),n.d(t,"a",function(){return w}),n.d(t,"c",function(){return D});var M=function getIntegrationIdentityContext(){var e=u.a.getState(),t=Object(d.g)(e),n=e.identity,a=(void 0===n?{}:n).hubspot_cookie,r=Object(c.a)(Object(c.a)(Object(c.a)({},y.getIntegrationContext(t)),I.getIntegrationContext(t)),R.getIntegrationContext(t));return a&&(r.hubspot={utk:a.utk,isNewUtk:a.isNewUtk}),r},w=function(){var e=Object(i.a)(r.a.mark(function _callee(){var e,t,n,a,i,c,o;return r.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return e=Object(l.a)(),r.next=3,U();case 3:return t=r.sent,u.a.dispatch(Object(s.k)({endUser:{leadId:t}})),r.next=7,Object(l.d)();case 7:if(n=r.sent,a=n.externalId,i=n.userJwt,!(!!a||!!i)){r.next=17;break}return r.next=14,G({id:a,email:e,userJwt:i,anonymousId:t});case 14:r.t0=r.sent,r.next=20;break;case 17:return r.next=19,V(e,t);case 19:r.t0=r.sent;case 20:return c=r.t0,o=Object(b.a)(f.a,c),u.a.dispatch(E(o)),r.abrupt("return",o);case 24:case"end":return r.stop()}},_callee)}));return function generateIdentity(){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(r.a.mark(function _callee2(e,t,n){var a,i,u;return r.a.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!t||H(t)){r.next=4;break}return Object(p.n)({data:["Unable to identify due to undefined userId"]}),r.abrupt("return");case 4:if(a=Object(c.a)({},n),!t||a.userJwt){r.next=11;break}return r.next=8,Object(l.d)();case 8:i=r.sent,(u=i.userJwt)&&(a.userJwt=u);case 11:return r.next=13,Object(o.c)(e,t,a);case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),Object(p.n)({data:[r.t0],type:"warn"});case 18:case"end":return r.stop()}},_callee2,null,[[0,15]])}));return function updateIdentity(t,n,a){return e.apply(this,arguments)}}(),V=function(){var e=Object(i.a)(r.a.mark(function _callee3(e,t){var n;return r.a.wrap(function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:return(n={}).lead_id=t,a.t0=Object,a.t1=n,a.next=6,P(n,e);case 6:return a.t2=a.sent,n=a.t0.assign.call(a.t0,a.t1,a.t2),a.t3=Object,a.t4=n,a.next=12,F(n);case 12:return a.t5=a.sent,n=a.t3.assign.call(a.t3,a.t4,a.t5),a.abrupt("return",n);case 15:case"end":return a.stop()}},_callee3)}));return function resolveIdentityProviders(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(r.a.mark(function _callee4(e,t){return r.a.wrap(function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return Object(O.a)(t)&&(e.email=t),L(e),n.abrupt("return",e);case 3:case"end":return n.stop()}},_callee4)}));return function resolveDirectIdentityProviders(t,n){return e.apply(this,arguments)}}(),L=function resolveOneShotIdentity(e){var t=N.identify();t&&(e.oneshot_token=t)},F=function(){var e=Object(i.a)(r.a.mark(function _callee5(e){var t,n,a,i,c,o;return r.a.wrap(function _callee5$(r){for(;;)switch(r.prev=r.next){case 0:return t=u.a.getState(),n=t.embed.configuration.gates,a=void 0===n?{}:n,r.next=4,Object(d.g)(t);case 4:if(i=r.sent,c=e.lead_id,!S.isEnabled(a)){r.next=11;break}return r.next=9,S.identify(c);case 9:(o=r.sent)&&(e.hubspot_cookie=o,o.email&&(e.email=o.email));case 11:return e.marketo_cookie=y.identify(i),e.marketo_identity=y.getIdentityEnabled(),e.pardot_cookie=R.identify(i,a),e.eloqua_cookie=I.identify(i,a),r.abrupt("return",e);case 16:case"end":return r.stop()}},_callee5)}));return function resolveThirdPartyIdentityProviders(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(r.a.mark(function _callee6(){var e,t,n;return r.a.wrap(function _callee6$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(g.d)(v.a);case 2:return e=a.sent,a.next=5,Object(g.d)(v.b);case 5:if(t=a.sent,e){a.next=14;break}if(!t){a.next=10;break}return Object(g.h)(v.a,t),a.abrupt("return",t);case 10:return n=Object(p.v)(),Object(g.h)(v.a,n),Object(g.h)(v.b,n),a.abrupt("return",n);case 14:return a.abrupt("return",e);case 15:case"end":return a.stop()}},_callee6)}));return function generateAnonymousIdentity(){return e.apply(this,arguments)}}(),G=function(){var e=Object(i.a)(r.a.mark(function _callee7(e){var t,n,a,i,c,o,u;return r.a.wrap(function _callee7$(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,n=e.email,a=e.userJwt,i=e.anonymousId,c={},o=Object(l.b)()&&!a,u=H(t),n&&(c.email=n),u?c.user_id=t:c.lead_id=i,a&&(c.jwt=a,c.lead_id=i,delete c.user_id),o&&(c.lead_id=i,delete c.user_id),L(c),r.abrupt("return",c);case 10:case"end":return r.stop()}},_callee7)}));return function generateExternalIdMap(t){return e.apply(this,arguments)}}(),H=function isValidExternalId(e){return!!e&&(!("undefined"===e)&&!("undefined-undefined"===e)&&!("d41d8cd98f00b204e9800998ecf8427e"===e))}},SFoa:function(e,t,n){"use strict";n.d(t,"f",function(){return l}),n.d(t,"c",function(){return b}),n.d(t,"d",function(){return f}),n.d(t,"b",function(){return v}),n.d(t,"i",function(){return p}),n.d(t,"g",function(){return g}),n.d(t,"a",function(){return m}),n.d(t,"e",function(){return E}),n.d(t,"h",function(){return I});var a=n("QtlZ"),r=n("da4L"),i=n("LVcX"),c=n("BCC6"),o=n("YsSj"),u=n("yzXs"),s=n("9A2/"),d=n("vTYT"),l=function getEmbedThemeProperty(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(i.a)(n,["configuration","theme",t],e)},b=function getCampaignIdFromInteractionId(e){var t=Object(i.a)(null,["embed","configuration","campaigns"],a.a.getState());if(t){var n=Object(c.a)(Object(o.a)(function hasInteractionId(t){return Object(r.a)(t,"interactionId")===e},t));if(n)return n.id}return null},f=function getCampaignPropertyById(e,t){var n=v(e);return n?Object(i.a)(null,[t],n):null},v=function getCampaignFromEmbedById(e){return Object(i.a)([],["embed","configuration","campaigns"],a.a.getState()).filter(function(t){return t.id===e})[0]},p=function getWidgetAlignment(){return Object(i.a)(d.a.RIGHT,["embed","configuration","theme","alignment"],a.a.getState())},g=function getOrgId(){return Object(i.a)(0,["embed","orgId"],a.a.getState())},O=Object(u.a)(Object(i.a)(void 0,["id"]),Object(s.a)(function(e){return e.bot}),Object(i.a)([],["embed","configuration","team"])),m=function getBotSenderId(){return O(a.a.getState())},E=function getEmbedLocale(){return Object(i.a)("en",["embed","configuration","locale"],a.a.getState())},I=function getUseWidgetLocaleForGDPR(){return Object(i.a)(!1,["embed","configuration","dataProtection","targetBasedOnWidgetLocale"],a.a.getState())}},SsZN:function(e,t,n){"use strict";n.d(t,"b",function(){return O}),n.d(t,"e",function(){return m}),n.d(t,"h",function(){return E}),n.d(t,"i",function(){return I}),n.d(t,"j",function(){return j}),n.d(t,"l",function(){return C}),n.d(t,"k",function(){return A}),n.d(t,"m",function(){return h}),n.d(t,"n",function(){return S}),n.d(t,"f",function(){return _}),n.d(t,"o",function(){return y}),n.d(t,"q",function(){return T}),n.d(t,"c",function(){return k}),n.d(t,"p",function(){return x}),n.d(t,"g",function(){return N}),n.d(t,"s",function(){return R}),n.d(t,"a",function(){return M}),n.d(t,"d",function(){return w}),n.d(t,"r",function(){return D});var a=n("mj2O"),r=n.n(a),i=n("7SM1"),c=n("nfbA"),o=n("QtlZ"),u=n("+f1A"),s=n("LVcX"),d=n("SWQ0"),l=n("6lNa"),b=n("0lfv"),f=n("wNJw"),v=n("JwhP"),p=function hydrateWithActiveCampaignData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.a.getState(),n=t.campaigns,a=void 0===n?{}:n,r=t.conversations,i=void 0===r?{}:r;if(e&&e.conversationId){var u=Object(s.a)(null,["activeConversation"],i);if(e.conversationId!==u)return e}var d=Object(s.a)(null,["activeCampaign","attributes","campaignId"],a),l=Object(s.a)(null,["activeCampaign","attributes","startInteraction"],a),b=Object(s.a)(null,["activeCampaign","attributes","playbookId"],a);return Object(c.a)(Object(c.a)({},e),{},{campaignId:d,interactionId:l,playbookId:b})},g=function createMessageEventPayload(e){return p({inboxId:e.inboxId,conversationId:e.conversationId})},O=function triggerButtonClickedAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(s.a)(null,["attributes","questionId"],e),n=p({createdAt:e.createdAt,authorId:e.authorId,conversationId:e.conversationId,buttonBody:Object(v.a)(e.body),questionId:t});Object(f.a)(d.b.CONVERSATION_BUTTON_CLICKED,n)},m=function triggerConversationFirstInteractionAPIEvent(e){var t={createdAt:e.createdAt,authorId:e.authorId};e.conversationId&&(t.conversationId=e.conversationId),e.id&&(t.messageId=e.id);var n=p(t);Object(f.a)(d.b.CONVERSATION_INTERACTED,n)},E=function triggerEmailCapturedAPIEvent(e){var t=e.email,n=o.a.getState().conversations,a=(void 0===n?{}:n).activeConversation||null,r={data:p({email:t,conversationId:a})};Object(f.a)(d.b.EMAIL_CAPTURED,r)},I=function triggerMeetingRequestedAPIEvent(e){var t=Object(s.a)([],["embed","configuration","team"],o.a.getState()).filter(function(t){return t.id===e});if(t.length){var n=t[0],a={teamMember:{id:n.id,name:n.name}};Object(f.a)(d.b.MEETING_REQUESTED,a)}},j=function triggerMeetingScheduledAPIEvent(e){var t=e.agentId,n=e.meetingTime,a=e.duration,r=e.timeZone,i=e.conversationId,c=Object(s.a)({},["conversations","messages",i],o.a.getState()),u=c[Object.keys(c)[0]],l=Object(s.a)([],["embed","configuration","team"],o.a.getState()).filter(function(e){return e.id===t})[0];if(u){var b=Object(s.a)(null,["attributes","campaignId"],u),v=Object(s.a)(null,["attributes","playbookId"],u),p=Object(s.a)(null,["attributes","startInteraction"],u),g={teamMember:{id:l.id,name:l.name},meeting:{time:n,duration:a,timeZone:r},conversationId:i,playbookId:v,campaignId:b,interactionId:p};Object(f.a)(d.b.MEETING_BOOKED,g)}},C=function triggerMessageSentAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(f.a)(d.b.MESSAGE_SENT,g(e))},A=function triggerMessageReceivedAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function getTeamUser(e){return e?Object(s.a)([],["embed","configuration","team"],o.a.getState()).find(function(t){return t.id===e}):null}(e.authorId)||{},n=Object(c.a)(Object(c.a)({},g(e)),{},{teamMember:{id:t.id,name:t.name}});Object(f.a)(d.b.MESSAGE_RECEIVED,n)},h=function triggerPhoneCapturedAPIEvent(e,t){var n=p({createdAt:e.createdAt,authorId:e.authorId,conversationId:e.conversationId,phone:t});Object(f.a)(d.b.PHONE_NUMBER_CAPTURED,n)},S=function triggerPlaybookClickedAPIEvent(e){var t=(e||{}).conversationId,n=p({conversationId:t});Object(f.a)(d.b.CONVERSATION_PLAYBOOK_CLICKED,n)},_=function triggerConversationSelectedAPIEvent(e){var t=p({conversationId:e});Object(f.a)(d.b.CONVERSATION_SELECTED,t)},y=function triggerPlaybookDismissedAPIEvent(e){var t=e||{},n=t.conversationId,a=t.id,r=p({conversationId:n,messageId:a});Object(f.a)(d.b.CONVERSATION_PLAYBOOK_DISMISSED,r)},T=function(){var e=Object(i.a)(r.a.mark(function _callee(e){var t;return r.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:t=Object(c.a)({botMessage:Object(b.h)(e)},p()),Object(f.a)(d.b.SLIDER_CLOSED,t);case 2:case"end":return n.stop()}},_callee)}));return function triggerSliderClosedAPIEvent(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(r.a.mark(function _callee2(e,t){var n,a,i;return r.a.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(e&&t){r.next=2;break}return r.abrupt("return");case 2:n=Object(s.a)(!1,["view","matchedTargeting"],o.a.getState()),a=Object(s.a)(!1,["targeting","isOnline"],o.a.getState()),i={campaignId:t,data:{isOnline:a,sidebarOpen:!1,widgetVisible:n}},r.t0=e,r.next=r.t0===l.b.CLICKED?8:r.t0===l.b.SUBMITTED?10:r.t0===l.b.OPENED?12:r.t0===l.b.DISMISSED?14:16;break;case 8:return Object(f.a)(d.b.CAMPAIGN_CLICKED,i),r.abrupt("break",17);case 10:return Object(f.a)(d.b.CAMPAIGN_SUBMITTED,i),r.abrupt("break",17);case 12:return Object(f.a)(d.b.CAMPAIGN_OPENED,i),r.abrupt("break",17);case 14:return Object(f.a)(d.b.CAMPAIGN_DISMISSED,i),r.abrupt("break",17);case 16:return r.abrupt("break",17);case 17:case"end":return r.stop()}},_callee2)}));return function triggerCampaignActionAPIEvent(t,n){return e.apply(this,arguments)}}(),x=function triggerPlaybookFiredAPIEvent(e){var t=e||{},n=t.authorId,a=t.conversationId,r=t.createdAt,i=t.id,c=t.attributes,o=(c=void 0===c?{playbookId:null,startInteraction:null,interactionId:null,campaignId:null}:c).playbookId,u=c.startInteraction,s=c.interactionId,l=c.campaignId;Object(f.a)(d.b.CONVERSATION_PLAYBOOK_FIRED,{messageId:i,createdAt:r,authorId:n,conversationId:a,interactionId:s||u,playbookId:o,campaignId:l})},N=function triggerConversationStartedAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.a.getState(),n=Object(u.d)(t),a=Object(u.c)(t),r={inboxId:e.inboxId,conversationId:e.conversationId,interactionId:e.attributes.interactionId,endUserId:n,endUserEmail:a};Object(f.a)(d.b.CONVERSATION_STARTED,r)},R=function triggerWelcomeMessageAPIEvent(e){var t=e?d.b.WELCOME_MESSAGE_OPENED:d.b.WELCOME_MESSAGE_CLOSED;Object(f.a)(t)},M=function triggerAwayMessageAPIEvent(e){var t=e?d.b.AWAY_MESSAGE_OPENED:d.b.AWAY_MESSAGE_CLOSED;Object(f.a)(t)},w=function createTriggerChatVisibleAPIEvent(){var e=!1;return function(t){e!==(t=!!t)&&((t?[d.b.CHAT_OPENED,d.b.SIDEBAR_OPENED]:[d.b.CHAT_CLOSED,d.b.SIDEBAR_CLOSED]).forEach(function(e){return Object(f.a)(e)}),e=t)}}(),D=function triggerUserAttributesUpdatedEvent(){Object(f.a)(d.b.USER_ATTRIBUTES_UPDATED)}},TDUE:function(e,t,n){"use strict";var a=n("jm9a"),r=n("nfbA"),i=n("mj2O"),c=n.n(i),o=n("7SM1"),u=n("SHZQ"),s=n("hm8b"),d=n("mfas"),l=n("MFhO"),b=n("gG69"),f=n("0lfv"),v=n("t8ds"),p=n("QtlZ"),g=n("9ttK"),O=n("CYoe"),m=n("LVcX"),E=function getTimeToImpression(e){if(e&&!function hasSentImpression(){var e=p.a.getState().impressions;return(void 0===e?{}:e).hasSentImpression||!1}())return p.a.dispatch(Object(O.e)()),Date.now()-e},I=function(){var e=Object(o.a)(c.a.mark(function _callee(e){var t,n,a,i,o,u,d,l,b,v,O,I,A,h,S,_,y,T,k,x,N,R,M,w,D,V,P,L,F,U,G,H,B,W;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.source,n=e.meta,a=void 0===n?{}:n,i=p.a.getState(),o=i.embed,u=void 0===o?{}:o,d=i.session,l=void 0===d?{}:d,b=i.conversations,v=void 0===b?{}:b,O=i.campaigns,I=void 0===O?{}:O,A=i.metrics,h=void 0===A?{}:A,c.prev=2,S=u.orgId,_=Object(m.a)(null,["endUser","id"],l),y=Object(m.a)(null,["activeCampaign","id"],I),T=a.conversationId||v.activeConversation,k=l.id,x=l.instanceId,N=Date.now(),R=Object(m.a)("",["context","page","url"],l),M=Object(m.a)("",["geo","country"],l),w=Object(m.a)("",["context","userAgent"],l),D=Object(s.a)(a.playbookId)?void 0:a.playbookId,V=Object(s.a)(a.interactionId)?void 0:a.interactionId,P=a.virtual||!1,L=a.isDelayed||!1,F=a.isExperiment?{isExperiment:a.isExperiment}:{},U=Object(s.a)(a.playbookVersion)?void 0:a.playbookVersion,!j(t)){c.next=25;break}return H=Object(g.b)(y),B=Object(g.a)(H,["campaignReenrollmentType"],null),c.next=24,C(D,_,k,x,T,B,P);case 24:G=c.sent;case 25:return W=E(h.initTimestamp),c.abrupt("return",{orgId:S,endUserId:_,sessionId:k,sentAt:N,impressionSource:Object(r.a)(Object(r.a)({source:t,playbookId:D,interactionId:V,instanceId:x,virtual:P,widgetVersion:2,sendId:G,timeToImpression:W,delayed:L},F),{},{playbookVersion:U}),context:{url:R,userAgent:w,country:M}});case 29:return c.prev=29,c.t0=c.catch(2),Object(f.f)(new Error("Failed to create impression event: ".concat(c.t0.message))),c.abrupt("return",null);case 33:case"end":return c.stop()}},_callee,null,[[2,29]])}));return function createImpressionEvent(t){return e.apply(this,arguments)}}();n.d(t,"b",function(){return j}),n.d(t,"a",function(){return C}),n.d(t,"d",function(){return A}),n.d(t,"c",function(){return S});var j=function isPlaybookImpressionEvent(e){return e===b.c.ACTIVE_PLAYBOOK||e===b.c.PASSIVE_PLAYBOOK},C=function(){var e=Object(o.a)(c.a.mark(function _callee(e,t,n,a,r,i,o){var u,s;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if(o){c.next=2;break}return c.abrupt("return",r?"CONVERSATION:".concat(r):void 0);case 2:if(t&&e&&n){c.next=4;break}return c.abrupt("return",u);case 4:c.t0=i,c.next=c.t0===l.b.ONCE?7:c.t0===l.b.ONCE_PER_SESSION?9:c.t0===l.b.ALWAYS?11:19;break;case 7:return u="ONCE:".concat(t,":").concat(e),c.abrupt("break",19);case 9:return u="ONCE_PER_SESSION:".concat(t,":").concat(e,":").concat(n),c.abrupt("break",19);case 11:return c.next=13,_(e);case 13:if(!(s=c.sent)){c.next=16;break}return c.abrupt("return",s);case 16:return u="ALWAYS:".concat(t,":").concat(e,":").concat(a),h(e,u),c.abrupt("break",19);case 19:return c.abrupt("return",u);case 20:case"end":return c.stop()}},_callee)}));return function getImpressionSendId(t,n,a,r,i,c,o){return e.apply(this,arguments)}}(),A=function(){var e=Object(o.a)(c.a.mark(function _callee2(e){var t,n,a=arguments;return c.a.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},r.next=3,I({source:e,meta:t});case 3:if(!(n=r.sent)){r.next=13;break}return r.prev=5,Object(u.f)(n),r.abrupt("return",!0);case 10:r.prev=10,r.t0=r.catch(5),Object(f.w)(["Failed to send widget impression",r.t0]);case 13:return r.abrupt("return",!1);case 14:case"end":return r.stop()}},_callee2,null,[[5,10]])}));return function trackWidgetImpression(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(c.a.mark(function _callee3(e,t){var n,i,o;return c.a.wrap(function _callee3$(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,v.b.get("ALWAYS_SEND_IDS");case 2:return n=c.sent,i=n.data,o=void 0===i?{}:i,c.next=7,v.b.set("ALWAYS_SEND_IDS",Object(r.a)(Object(r.a)({},o),{},Object(a.a)({},e,t)));case 7:case"end":return c.stop()}},_callee3)}));return function addSendIdToStore(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(o.a)(c.a.mark(function _callee4(e){var t,n,a;return c.a.wrap(function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.b.get("ALWAYS_SEND_IDS");case 2:return t=r.sent,n=t.data,a=Object(s.a)(n)?{}:Object(d.a)(["".concat(e)],n),r.next=7,v.b.set("ALWAYS_SEND_IDS",a);case 7:case"end":return r.stop()}},_callee4)}));return function removeSendIdFromStore(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(o.a)(c.a.mark(function _callee5(e){var t,n;return c.a.wrap(function _callee5$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.b.get("ALWAYS_SEND_IDS");case 2:return t=a.sent,n=t.data,a.abrupt("return",Object(s.a)(n)?null:n[e]);case 5:case"end":return a.stop()}},_callee5)}));return function getSendIdInStore(t){return e.apply(this,arguments)}}()},UXSh:function(e,t,n){"use strict";var a=n("WwEg"),r=n("Cpup"),i={id:null,attributes:{},message:null},c={activeCampaign:i,campaignEvalId:null,enrolledCampaignIds:[],enrolledInteractionIds:[],ineligibleCampaignIds:[],unreadCampaigns:[],campaignConversations:[]},o={RECEIVE_ACTIVE_CAMPAIGN:function receiveActiveCampaignHandler(e){var t=e.action;e.draft.activeCampaign=t.payload.data},CLEAR_ACTIVE_CAMPAIGN:function clearActiveCampaignHandler(e){e.draft.activeCampaign=i},RECEIVE_CAMPAIGN_EVAL_ID:function receiveCampaignEvalIdHandler(e){var t=e.action;e.draft.campaignEvalId=t.payload.campaignEvalId},RECEIVE_UNREAD_CAMPAIGNS:function receiveUnreadCampaignsHandler(e){var t=e.action;e.draft.unreadCampaigns=t.payload},RECEIVE_ENROLLED_CAMPAIGN:function receiveEnrolledCampaignHandler(e){var t=e.action,n=e.draft;n.enrolledCampaignIds=[].concat(Object(a.a)(n.enrolledCampaignIds),[t.payload])},RECEIVE_ENROLLED_INTERACTION:function receiveEnrolledInteractionHandler(e){var t=e.action,n=e.draft;n.enrolledInteractionIds=[].concat(Object(a.a)(n.enrolledInteractionIds),[t.payload])},RECEIVE_INELIGIBLE_CAMPAIGNS:function receiveIneligibleCampaignsHandler(e){var t=e.action;e.draft.ineligibleCampaignIds=t.payload}},u=Object(r.b)(c,o);t.a=u},V4ET:function(e,t,n){},Wjfv:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return c}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return u}),n.d(t,"f",function(){return s}),n.d(t,"g",function(){return d});var a=n("Cpup"),r=function receiveActiveCampaign(e){return Object(a.a)({type:"RECEIVE_ACTIVE_CAMPAIGN",payload:e})},i=function receiveEnrolledCampaign(e){return Object(a.a)({type:"RECEIVE_ENROLLED_CAMPAIGN",payload:e})},c=function receiveEnrolledInteraction(e){return Object(a.a)({type:"RECEIVE_ENROLLED_INTERACTION",payload:e})},o=function clearActiveCampaign(){return Object(a.a)({type:"CLEAR_ACTIVE_CAMPAIGN"})},u=function receiveCampaignEvalId(e){return Object(a.a)({type:"RECEIVE_CAMPAIGN_EVAL_ID",payload:e})},s=function receiveIneligibleCampaigns(e){return Object(a.a)({type:"RECEIVE_INELIGIBLE_CAMPAIGNS",payload:e})},d=function receiveUnreadCampaigns(e){return Object(a.a)({type:"RECEIVE_UNREAD_CAMPAIGNS",payload:e})}},bYXQ:function(e,t,n){"use strict";n.d(t,"d",function(){return s}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return b});var a=n("QtlZ"),r=n("+/Je"),i=n("LVcX"),c=n("DboL"),o=n("PjZB"),u=n("0lfv"),s=function isPrerenderedConversation(e){return e===r.b},d=function isNewConversation(e){return e===r.a},l=function conversationHasEndUserMessage(e){var t=Object(i.a)(null,["conversations","messages",e.conversationId.toString()],a.a.getState());return t&&Object(c.a)(t).some(function(t){return t.authorType!==o.b.USER&&!!t.body&&t.id!==e.id})},b=function isConversationIdNullOrPreRendered(e){return Object(u.m)(e)||s(e)}},fsHk:function(e,t,n){"use strict";var a=n("A5mO");t.a={getTime:function getTime(e,t){try{return t?Object(a.a)(e,t):Object(a.a)(e)}catch(n){return Object(a.a)(e,"America/New_York")}},getCurrentTime:function getCurrentTime(e){try{return a.a.now(e||this.getTimezone())}catch(t){return a.a.now("America/New_York")}},getCurrentTimeEpoch:function getCurrentTimeEpoch(){return this.getCurrentTime().epoch},getTimezone:function getTimezone(){try{return Object(a.a)().timezone().name}catch(e){return"America/New_York"}},getOffsetForTimezone:function getOffsetForTimezone(e){return this.getCurrentTime(e).offset()},getCurrentTimeDifferenceInDays:function getCurrentTimeDifferenceInDays(e){return e?this.getCurrentTime().since(e||this.getCurrentTime()).diff.days:0},addTime:function addTime(e,t,n){return this.getTime(e).add(t,n).epoch},isTimeBefore:function isTimeBefore(e,t){var n=this.convertToSpacetime(t);return this.getTime(e).isBefore(n)},isTimeAfter:function isTimeAfter(e,t){var n=this.convertToSpacetime(e),a=this.convertToSpacetime(t);return n.isAfter(a)},isTimeAfterHours:function isTimeAfterHours(e,t,n){return this.isTimeAfter(e,this.addTime(t,n,"hour").epoch)},isTimeAfterSeconds:function isTimeAfterSeconds(e,t,n){return this.isTimeAfter(e,this.addTime(t,n,"second").epoch)},isCurrentTimeAfter:function isCurrentTimeAfter(e){var t=this.convertToSpacetime(e);return this.getCurrentTime().isAfter(t)},isTimeToday:function isTimeToday(e){try{return this.getTime(e).isSame(a.a.today(this.getTimezone()),"date")}catch(t){return this.getTime(e).isSame(a.a.today("America/New_York"),"date")}},isTimeSame:function isTimeSame(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"date";return this.getTime(e).isSame(this.getCurrentTime(),t)},unixFormatDateTime:function unixFormatDateTime(e,t,n){return this.getTime(e,n).unixFmt(t)},compileI18nForDateTime:function compileI18nForDateTime(e){var t=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n=["january","february","march","april","may","june","july","august","september","october","november","december"];!function run(){Object(a.a)(null).i18n({days:{long:t.map(function(t){return e.t("dt.day.".concat(t))}),short:t.map(function(t){return e.t("dt.short.day.".concat(t))})},months:{long:n.map(function(t){return e.t("dt.month.".concat(t))}),short:n.map(function(t){return e.t("dt.short.month.".concat(t))})},useTitleCase:!1})}()},convertToSpacetime:function convertToSpacetime(e){return this.getTime(e)},convertToSpacetimeWithTimezone:function convertToSpacetimeWithTimezone(e,t){return this.getTime(e,t)}}},iL91:function(e,t,n){"use strict";n.d(t,"c",function(){return E}),n.d(t,"b",function(){return I}),n.d(t,"a",function(){return j});var a=n("mj2O"),r=n.n(a),i=n("nfbA"),c=n("7SM1"),o=n("OE2q"),u=n("QtlZ"),s=n("+/Je"),d=n("SsZN"),l=n("zX3+"),b=n("LVcX"),f=n("z5yO"),v=n("U3QC"),p=n("icD7"),g=n("Cpup"),O=n("K7i0"),m=n("bYXQ"),E=function sendMessageEpic(e,t){return e.pipe(Object(g.c)("SEND_MESSAGE"),Object(f.a)(function(){return"controller"===u.a.name}),Object(v.a)(function(){var e=Object(c.a)(r.a.mark(function _callee(e){var n,a,c,o,d,f,v,p,g;return r.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return n=e.payload,a=Object(b.a)({},["activeCampaign"],t.value.campaigns),c=t.value.conversations.activeConversation,o=Object(m.d)(c),d=function getConversationId(){return Object(b.a)(!1,["attributes","liveViewInitiated"],a)?Object(b.a)(null,["attributes","conversationId"],a):!o&&c?c:void 0},f=Object(i.a)(Object(i.a)({},n.message),{},{conversationId:d(),attributes:Object(i.a)(Object(i.a)(Object(i.a)({},n.message.attributes?n.message.attributes:{}),o?t.value.conversations.resumeFlowContext:{}),{},{embedId:t.value.embed.id})}),r.next=8,Object(l.a)(f);case 8:if(v=r.sent){r.next=11;break}return r.abrupt("return");case 11:p=v.data,g=!n.message.conversationId||n.message.conversationId===s.b,u.a.dispatch(Object(O.i)({message:p,isPreRendered:o,isNew:g}));case 14:case"end":return r.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}()),Object(p.a)())},I=function receiveMessageSentEpic(e,t){return e.pipe(Object(g.c)("RECEIVE_MESSAGE_SENT"),Object(f.a)(function(){return"controller"===u.a.name}),Object(v.a)(function(e){var t=e.payload.message;Object(m.a)(t)||Object(d.e)(t)}),Object(p.a)())},j=function checkPermacloseConversationEpic(e,t){return e.pipe(Object(g.c)("SET_ACTIVE_CONVERSATION"),Object(f.a)(function(){return"controller"===u.a.name}),Object(v.a)(function(){var e=Object(c.a)(r.a.mark(function _callee2(e){var n,a,i,c;return r.a.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(!((n=e.payload.conversationId)<0||n===s.b)){r.next=3;break}return r.abrupt("return");case 3:if(!Object(b.a)(!1,["conversations","conversationStatus",n,"permaclosed"],t.value)){r.next=6;break}return r.abrupt("return");case 6:return a=n,r.next=9,Object(o.g)(a);case 9:i=r.sent,c=i.data.sentMessage,void 0!==c&&c&&u.a.dispatch(Object(O.b)({conversationId:a}));case 13:case"end":return r.stop()}},_callee2)}));return function(t){return e.apply(this,arguments)}}()),Object(p.a)())}},qixE:function(e,t,n){"use strict";n.d(t,"a",function(){return j}),n.d(t,"e",function(){return y}),n.d(t,"d",function(){return k}),n.d(t,"b",function(){return x}),n.d(t,"c",function(){return N});var a=n("nfbA"),r=n("mj2O"),i=n.n(r),c=n("7SM1"),o=n("OE2q"),u=n("QtlZ"),s=n("SsZN"),d=n("0HCW"),l=n("K7i0"),b=n("bYXQ"),f=n("PCkZ"),v=n("LVcX"),p=n("hm8b"),g=n("DboL"),O=n("BCC6"),m=n("6lNa"),E=n("0lfv"),I=n("9xv8"),j=function(){var e=Object(c.a)(i.a.mark(function _callee(e){var t,n,a=arguments;return i.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:t=a.length>1&&void 0!==a[1]?a[1]:{},r.t0=e,r.next=r.t0===m.b.LEAD_CAPTURED?4:r.t0===m.b.CLICKED?7:r.t0===m.b.SUBMITTED?7:r.t0===m.b.DISMISSED?7:r.t0===m.b.OPENED?7:12;break;case 4:return r.next=6,h(t);case 6:return r.abrupt("return",r.sent);case 7:return r.next=9,S(e,t);case 9:return n=r.sent,C(n,e),r.abrupt("break",13);case 12:return r.abrupt("break",13);case 13:case"end":return r.stop()}},_callee)}));return function createConversationEvent(t){return e.apply(this,arguments)}}(),C=function triggerAPIEventForConversationAction(e,t){var n=Object(v.a)(null,["attributes","campaignId"],e);n&&Object(s.c)(t,n)},A=function(){var e=Object(c.a)(i.a.mark(function _callee2(e){var t;return i.a.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:if(t=Object(d.a)(u.a.getState()),!Object(E.m)(e)){n.next=3;break}return n.abrupt("return");case 3:if(n.prev=3,!e.conversationId){n.next=10;break}return n.next=7,Object(o.i)(e);case 7:n.t0=n.sent,n.next=13;break;case 10:return n.next=12,Object(o.c)(e,{campaignId:t});case 12:n.t0=n.sent;case 13:return n.abrupt("return",n.t0);case 16:n.prev=16,n.t1=n.catch(3),Object(E.f)("Failed to send conversation event",e);case 19:case"end":return n.stop()}},_callee2,null,[[3,16]])}));return function sendConversationEvent(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(i.a.mark(function _callee3(e){var t,n,a;return i.a.wrap(function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:if(e.email){r.next=2;break}return r.abrupt("return");case 2:return t={conversationId:e.conversationId,type:m.b.LEAD_CAPTURED,email:e.email,leadCapture:{email:e.email,integrations:Object(f.b)(),context:_()}},r.next=5,A(t);case 5:return n=r.sent,a=n.data,r.abrupt("return",a);case 8:case"end":return r.stop()}},_callee3)}));return function createLeadCapturedConversationEvent(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(c.a)(i.a.mark(function _callee4(e){var t,n,r,c,o=arguments;return i.a.wrap(function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:if(t=o.length>1&&void 0!==o[1]?o[1]:{},e&&!Object(p.a)(t)){i.next=3;break}return i.abrupt("return");case 3:return n=Object(a.a)({type:e},t),i.next=6,A(n);case 6:return r=i.sent,c=r.data,i.abrupt("return",c);case 9:case"end":return i.stop()}},_callee4)}));return function captureConversationActionEvent(t){return e.apply(this,arguments)}}(),_=function _hydrateConversationEventContext(){var e=u.a.getState().session,t=(void 0===e?{}:e).context||{},n=t.userAgent,a=t.locale,r=t.timezone,i=t.page;return{page:void 0===i?{}:i,locale:a,timezone:r,userAgent:n}},y=function(){var e=Object(c.a)(i.a.mark(function _callee5(){var e,t,n,a,r,c,o,s,d,b;return i.a.wrap(function _callee5$(i){for(;;)switch(i.prev=i.next){case 0:if(e=u.a.getState(),t=e.campaigns,n=void 0===t?{}:t,a=e.conversations,r=void 0===a?{}:a,c=e.session,o=Object(v.a)(null,["activeCampaign","id"],n),s=Object(v.a)(null,["visitInformation","currentSessionStartedAt"],c),!o&&!r.activeConversation&&s){i.next=5;break}return i.abrupt("return",!1);case 5:if(d=Object(g.a)(r.conversations).map(function(e){return e.conversation}).filter(function(e){return e.createdAt>=s}),b=T(d)){i.next=9;break}return i.abrupt("return",!1);case 9:return u.a.dispatch(Object(l.n)({conversationId:b.id})),i.abrupt("return",!0);case 11:case"end":return i.stop()}},_callee5)}));return function showLatestSessionConversation(){return e.apply(this,arguments)}}(),T=function getMostRecentConversation(e){var t=Object(I.b)(e,"createdAt");return Object(O.a)(t)},k=function markMessageAsRead(e,t){try{Object(b.d)(e)||Object(o.a)(e,[t]),u.a.dispatch(Object(l.l)({conversationId:e}))}catch(n){Object(E.f)(new Error("Failed to mark message as read"),n)}},x=function markActiveConversationAsRead(){var e=u.a.getState().conversations;N((void 0===e?{}:e).activeConversation)},N=function markConversationAsRead(e){if(e){var t=u.a.getState().conversations,n=(void 0===t?{}:t).unreadAgentMessages[e]||[];if(n.length)try{Object(b.d)(e)||Object(o.a)(e,n),u.a.dispatch(Object(l.l)({conversationId:e}))}catch(a){Object(E.f)(new Error("Failed to mark conversation as read"),a)}}}},uzby:function(e,t,n){"use strict";var a=n("WwEg"),r=n("da4L"),i=n("LVcX"),c=n("0B8E"),o=n("TbSn"),u=n("Jstd"),s=n("U505"),d=n("PjZB"),l=n("Cpup"),b={SET_HAS_SENT_IMPRESSION:function setHasSentImpressionHandler(e){e.draft.hasSentImpression=!0},RECEIVE_ACTIVE_CAMPAIGN:function receiveNewBotCampaignMessageHandler(e){var t=e.action,n=e.draft,o=Object(i.a)({},["data"],t.payload),u=Object(r.a)(o,"playbookId");n.active=Object(c.a)([].concat(Object(a.a)(n.active),[u]))},RECEIVE_INITIAL_ACTIVE_CONVERSATION:function receiveInitialActiveConversationHandler(e){var t=e.action,n=e.draft,a=Object(i.a)(null,["payload","conversation","conversation","id"],t);a&&(n.initialConversationId=a)},RECEIVE_MESSAGES_FOR_CONVERSATION:function receiveMessagesForConversationHandler(e){var t=e.action,n=e.draft,i=t.payload.messages,s=Object(o.a)(t.payload.messages),l=Object(r.e)(s,"startInteraction"),b=Object(u.a)(function(e){return e.viewerRecipientStatus===d.f.READ},i);if(l&&b&&s.conversationId===n.initialConversationId){var f=Object(r.a)(s,"playbookId");n.passive=Object(c.a)([].concat(Object(a.a)(n.passive),[f]))}},REMOVE_TRIGGERABLE_CAMPAIGN_IMPRESSION:function removeTriggerableCampaignImpressionHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.source,i=a.playbookId;"active"===r?n.active=Object(s.a)([i],n.active):"passive"===r&&(n.passive=Object(s.a)([i],n.passive))}};t.a=Object(l.b)({hasSentImpression:!1,initialConversationId:null,active:[],passive:[]},b)},vjCh:function(e,t,n){"use strict";n.d(t,"a",function(){return V}),n.d(t,"b",function(){return P}),n.d(t,"l",function(){return L}),n.d(t,"k",function(){return F}),n.d(t,"d",function(){return U}),n.d(t,"f",function(){return G}),n.d(t,"g",function(){return H}),n.d(t,"e",function(){return W}),n.d(t,"j",function(){return Y}),n.d(t,"h",function(){return $}),n.d(t,"i",function(){return Z}),n.d(t,"c",function(){return z});var a=n("nfbA"),r=n("mj2O"),i=n.n(r),c=n("7SM1"),o=n("xXFf"),u=n("QtlZ"),s=n("sxX9"),d=n("SsZN"),l=n("Wjfv"),b=n("K7i0"),f=n("xwTo"),v=n("Hvhg"),p=n("SFoa"),g=n("y0Ar"),O=n("TDUE"),m=n("da4L"),E=n("2XY6"),I=n("LVcX"),j=n("YsSj"),C=n("mfas"),A=n("TbSn"),h=n("NFvl"),S=n("vYqp"),_=n("hm8b"),y=n("YvIt"),T=n("MFhO"),k=n("PjZB"),x=n("0lfv"),N=n("t8ds"),R=n("La++"),M=n("0HCW"),w=n("9ttK"),D=function(){var e=Object(c.a)(i.a.mark(function _callee(){var e,t,n,a,r;return i.a.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(e=u.a.getState(),t=e.session,n=void 0===t?{}:t,a=Object(I.a)(null,["visitInformation","currentSessionStartedAt"],n)){i.next=4;break}return i.abrupt("return",[]);case 4:return r=Object(f.b)(u.a.getState()),i.abrupt("return",Object(j.a)(function(e){return e.createdAt>=a},r));case 6:case"end":return i.stop()}},_callee)}));return function getSessionCampaignConversations(){return e.apply(this,arguments)}}(),V=function assignActiveCampaignFromEmbed(e,t){var n=Object(w.a)(e,["displayType"]),r={id:e.id,attributes:Object(a.a)(Object(a.a)({},e.attributes),{},{message:t,campaignId:e.id,campaignDisplayType:n}),inboxId:e.inboxId};u.a.dispatch(Object(l.b)({data:r}))},P=function assignActiveCampaignFromMessage(e){if(!Object(x.m)(e)){var t=Object(m.a)(e,"campaignId");if(!t&&Object(m.e)(e,"startInteraction")){var n=Object(m.a)(e,"startInteraction");t=Object(p.c)(n)}var a=Object(C.a)(["attributes"],e),r={id:t,attributes:e.attributes||{},message:a,inboxId:e.inboxId};u.a.dispatch(Object(l.b)({data:r}))}},L=function(){var e=Object(c.a)(i.a.mark(function _callee2(e,t){var n;return i.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,K(e);case 4:if(n=W(e),Object(w.a)(n,["campaignReenrollmentType"],null)!==T.b.ALWAYS){a.next=10;break}return a.next=9,Object(O.c)(t);case 9:return a.abrupt("return");case 10:case"end":return a.stop()}},_callee2)}));return function storeAnnouncementCampaignCompleted(t,n){return e.apply(this,arguments)}}(),F=function showUnreadCampaign(e){var t=u.a.getState(),n=t.conversations,r=void 0===n?{}:n,i=t.campaigns,c=void 0===i?{}:i,o=r.activeDriftlink;if(!c.activeCampaign.id&&!o){var s=Object(M.g)()[e];if(s){var l=s.conversation,f=void 0===l?{}:l,v=s.messages,p=void 0===v?[]:v,O=p[0],E=Object(m.a)(O,"playbookId"),I=Object(m.a)(O,"interactionId"),j=Object(m.a)(O,"isExperiment"),C=Object(m.a)(O,"playbookVersion");u.a.dispatch(Object(b.h)({conversation:{conversation:f}})),u.a.dispatch(Object(b.j)({conversationId:f.id,messages:p})),u.a.dispatch(Object(b.n)({conversationId:f.id})),Object(d.p)(Object(a.a)(Object(a.a)({},O),{},{id:null,conversationId:null})),P(O),Object(g.a)({playbookId:E,interactionId:I,isExperiment:j,playbookVersion:C})}}},U=function evaluateCampaignConversations(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=B(e);u.a.dispatch(Object(l.g)(t)),u.a.dispatch(Object(b.g)(e))},G=function getUnreadCampaignIds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return B(e).map(function(e){return e.conversation.campaignId})},H=function getUnreadCampaignIdsFromStore(){return u.a.getState().campaigns.unreadCampaigns.map(function(e){return e.conversation.campaignId})},B=function getUnreadCampaigns(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filter(function(e){return function isBotCampaign(e){return"CHAT"===Object(I.a)(null,["conversation","type"],e)}(e)&&function isFirstMessageUnread(e){var t=e.messages.filter(function(e){return""!==e.body});return Object(I.a)(null,[0,"viewerRecipientStatus"],t)!==k.f.READ}(e)})},W=function getCampaignFromEmbedById(e){return Object(I.a)([],["embed","configuration","campaigns"],u.a.getState()).filter(function(t){return t.id===e})[0]},Y=function(){var e=Object(c.a)(i.a.mark(function _callee3(){var e,t,n,a,r,c,o,s,d,l,f,p,g,O;return i.a.wrap(function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,N.a.get(y.a);case 2:if(t=i.sent,n=t.data,a=void 0===n?{}:n,r=u.a.getState(),c=Object(v.d)(r),!Object(x.m)(a)){i.next=9;break}return i.abrupt("return",!1);case 9:if(o=a[c]||[]){i.next=12;break}return i.abrupt("return");case 12:return s=Object(A.a)(o),i.next=15,D();case 15:if(d=i.sent,!(l=d[s])){i.next=20;break}return u.a.dispatch(Object(b.n)({conversationId:Object(h.a)(["id"],l)})),i.abrupt("return",!0);case 20:if(f=W(s)){i.next=23;break}return i.abrupt("return",!1);case 23:return p=Object(h.a)(["attributes","interactionId"],f),g=Object(h.a)(["attributes","playbookId"],f),i.next=27,Object(R.a)({playbookId:g,campaignId:s,interactionId:p,inboxId:f.inboxId});case 27:if(O=i.sent){i.next=30;break}return i.abrupt("return",!1);case 30:return u.a.dispatch(Object(b.k)({campaignId:s,messages:null!==(e=null===O||void 0===O?void 0:O.messages)&&void 0!==e?e:[],resumeFlowContext:Object(S.a)(_.a,O.resumeFlowContext)})),i.abrupt("return",!0);case 32:case"end":return i.stop()}},_callee3)}));return function showLastCampaignInSession(){return e.apply(this,arguments)}}(),$=function markEnrolledInteraction(e){u.a.dispatch(Object(l.e)(e))},K=function(){var e=Object(c.a)(i.a.mark(function _callee4(e){var t,n,a,r;return i.a.wrap(function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:return t=u.a.getState(),n=t.session,a=void 0===n?{}:n,i.prev=1,r=Object(I.a)(null,["endUser","id"],a),i.next=5,Object(o.d)({endUserId:r,campaignId:e,sessionId:a.campaignRefreshToken});case 5:return i.abrupt("return",i.sent);case 8:return i.prev=8,i.t0=i.catch(1),Object(x.f)("Failed to persist campaign interaction: ".concat(i.t0.message)),i.abrupt("return",null);case 12:case"end":return i.stop()}},_callee4,null,[[1,8]])}));return function triggerCampaignInteractionEvent(t){return e.apply(this,arguments)}}(),Z=function shouldSkipCampaignRetargeting(){var e=u.a.getState(),t=Object(f.g)(),n=Object(M.h)(e),a=Object(E.c)(e),r=Object(E.a)(e);return!!t||r!==s.b.WELCOME_MESSAGE&&(a&&n)},z=function clearCurrentCampaign(){u.a.dispatch(Object(l.a)()),u.a.dispatch(Object(b.a)())}},xwTo:function(e,t,n){"use strict";n.d(t,"e",function(){return b}),n.d(t,"g",function(){return v}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return g}),n.d(t,"f",function(){return O}),n.d(t,"d",function(){return m}),n.d(t,"c",function(){return E});var a=n("QtlZ"),r=n("+/Je"),i=n("da4L"),c=n("LVcX"),o=n("i9gz"),u=n("DboL"),s=n("9A2/"),d=n("hm8b"),l=n("NFvl"),b=function getVisibleActiveConversationMessages(e){var t=e.conversations,n=void 0===t?{}:t,a=n.activeConversation;if(!a)return[];var r=Object(c.a)({},["messages",a],n);return Object(o.a)(r)?[]:Object(i.p)(r)},f=function conversationHasEndUserMessages(e){var t=function getConversationMessages(e){var t=a.a.getState().conversations,n=void 0===t?{}:t,r=Object(c.a)({},["messages",e],n);return Object(u.a)(r)}(e);if(!t||!t.length)return!1;var n=Object(s.a)(function(e){return Object(i.h)(e)},t);return!Object(d.a)(n)},v=function hasActiveConversationBeenInteractedWith(){var e=a.a.getState().conversations,t=(void 0===e?{}:e).activeConversation;return!!t&&f(t)},p=function getActiveConversationId(e){return Object(l.a)(["conversations","activeConversation"],e)},g=function getCampaignConversations(e){return Object(c.a)([],["conversations","campaignConversations"],e)},O=function hasActiveConversation(e){return!!Object(c.a)(null,["conversations","activeConversation"],e)},m=function getIsActiveConversationPermaclosed(e){var t=p(e);return Object(c.a)(!1,["conversations","conversationStatus",t,"permaclosed"],e)},E=function getIsActiveConversationNew(e){return p(e)===r.a}},y0Ar:function(e,t,n){"use strict";var a=n("QtlZ"),r=n("Cpup"),i=n("gG69"),c=n("TDUE");n.d(t,"a",function(){return o});var o=function sendPlaybookImpression(e){var t=e.playbookId,n=e.interactionId,o=e.conversationId,u=e.isVirtual,s=void 0!==u&&u,d=e.isDelayed,l=void 0!==d&&d,b=e.isExperiment,f=e.playbookVersion,v=a.a.getState().impressions,p=v.active,g=void 0===p?[]:p,O=v.passive,m=void 0===O?[]:O,E=g.includes(t),I=m.includes(t);(E||I)&&(Object(c.d)(E?i.c.ACTIVE_PLAYBOOK:i.c.PASSIVE_PLAYBOOK,{playbookId:t,interactionId:n,conversationId:o,virtual:s,isDelayed:l,isExperiment:b,playbookVersion:f})&&a.a.dispatch(function removeTriggerableCampaignImpression(e){return Object(r.a)({type:"REMOVE_TRIGGERABLE_CAMPAIGN_IMPRESSION",payload:e})}({source:E?"active":"passive",playbookId:t})))}},zYBT:function(e,t,n){"use strict";var a=n("fWWA"),r=n("ERkP"),i=n.n(r),c=n("0O9J"),o=n("ZO/3"),u=n("UAFN"),s=n("SkRI"),d=(n("V4ET"),n("Yl0Q"),Object(r.lazy)(function(){return Object(s.a)(function(){return Promise.all([n.e(20),n.e(19),n.e(26)]).then(n.bind(null,"7fJ7"))})})),l=Object(r.lazy)(function(){return Object(s.a)(function(){return n.e(30).then(n.bind(null,"2AO3"))})}),b=Object(r.lazy)(function(){return Object(s.a)(function(){return n.e(29).then(n.bind(null,"DpcA"))})}),f=Object(r.lazy)(function(){return Object(s.a)(function(){return n.e(23).then(n.bind(null,"WjTm"))})}),v=Object(r.lazy)(function(){return Object(s.a)(function(){return n.e(27).then(n.bind(null,"gSHW"))})}),p=Object(r.lazy)(function(){return Object(s.a)(function(){return Promise.all([n.e(1),n.e(0),n.e(25)]).then(n.bind(null,"0Q1V"))})});t.a=function AppLayout(){return i.a.createElement(a.a,null,i.a.createElement(c.a,{basename:"core"},i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,null,i.a.createElement(u.a,{exact:!0,path:"/"},i.a.createElement(r.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(d,null))),i.a.createElement(u.a,{path:"/chat"},i.a.createElement(r.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(l,null))),i.a.createElement(u.a,{path:"/takeover"},i.a.createElement(r.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(b,null))),i.a.createElement(u.a,{path:"/emailCapture"},i.a.createElement(r.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(f,null))),i.a.createElement(u.a,{exact:!0,path:"/slider"},i.a.createElement(r.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(v,null))),i.a.createElement(u.a,{exact:!0,path:"/landingPage"},i.a.createElement(r.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(p,null)))))))}},zygl:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n("xwTo"),r=n("X9/c"),i=n("U3QC"),c=n("icD7"),o=n("Cpup"),u=function resizeControllerAfterCampaignClear(e,t){return e.pipe(Object(o.c)("CLEAR_ACTIVE_CAMPAIGN"),Object(i.a)(function(){var e=t.value.view;(void 0===e?{}:e).matchedTargeting||Object(a.f)(t.value)||Object(r.a)()}),Object(c.a)())}}}]);